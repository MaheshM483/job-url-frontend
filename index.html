<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Job URL - Direct Career Links</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* keep your full original styles here */
</style>
</head>
<body>
<div class="container">
<header>
<div class="logo"><i class="fas fa-link"></i><h1>Job URL</h1></div>
<p class="tagline">Direct links to company career pages. No sign-up required. Always free.</p>
</header>

<section class="search-section">
<h2 class="section-title"><i class="fas fa-search"></i> Find Your Dream Job</h2>
<div class="info-box">
<p><i class="fas fa-info-circle"></i> Enter any company name and job title to get live job posting URLs.</p>
</div>

<form class="search-form" id="searchForm">
<div class="form-group">
<label for="company">Company Name</label>
<input type="text" id="company" class="form-control" placeholder="e.g. Apple, Google" required>
</div>
<div class="form-group">
<label for="jobTitle">Job Title</label>
<input type="text" id="jobTitle" class="form-control" placeholder="e.g. Data Analyst" required>
</div>
</form>

<div class="actions">
<button class="btn btn-primary" id="searchBtn"><i class="fas fa-search"></i>&nbsp; Search Jobs</button>
</div>
</section>

<section class="results-section">
<div class="results-header">
<h2 class="section-title"><i class="fas fa-briefcase"></i> Results</h2>
<span class="results-count" id="resultsCount">0 jobs found</span>
</div>
<div class="results-grid" id="resultsGrid">
<!-- Job cards will appear here -->
</div>
</section>

<footer>
&copy; 2025 Job URL | Built with ❤️ for job seekers
</footer>
</div>

<script>
  // Use your deployed Render backend
  const API_URL = "https://job-url-backend.onrender.com/api/jobs";
  
  const searchBtn = document.getElementById('searchBtn');
  const resultsGrid = document.getElementById('resultsGrid');

  async function searchJobs() {
    const company = document.getElementById('company').value.trim();
    const jobTitle = document.getElementById('jobTitle').value.trim();
    const location = document.getElementById('location').value.trim();
    const jobType = document.getElementById('jobType').value || "Full-time";

    if (!company || !jobTitle || !location) {
      alert("Please fill in company, job title, and location.");
      return;
    }

    resultsGrid.innerHTML = `<p>Searching...</p>`;

    try {
      const res = await fetch(`${API_URL}?company=${encodeURIComponent(company)}&title=${encodeURIComponent(jobTitle)}&location=${encodeURIComponent(location)}&type=${encodeURIComponent(jobType)}`);
      const data = await res.json();

      console.log("API Response:", data); // For debugging

      if (!data.jobs || data.jobs.length === 0) {
        resultsGrid.innerHTML = `<p>No jobs found. Try different search terms.</p>`;
        return;
      }

      resultsGrid.innerHTML = "";
      data.jobs.forEach(job => {
        const card = document.createElement('div');
        card.classList.add('job-card');
        card.innerHTML = `
          <strong>${job.company}</strong><br>
          ${job.title}<br>
          ${job.location}<br>
          <a href="${job.url}" target="_blank" class="job-url">Apply Now</a>
        `;
        resultsGrid.appendChild(card);
      });

    } catch (err) {
      console.error("Frontend Error:", err);
      resultsGrid.innerHTML = `<p>Error fetching jobs. Try again later.</p>`;
    }
  }

  searchBtn.addEventListener('click', searchJobs);
</script>
</body>
</html>
