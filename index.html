<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Job URL - Direct Career Links</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* keep your full original styles here */
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
.container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
header { text-align: center; margin-bottom: 2rem; color: white; }
.logo { display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 2.5rem; margin-bottom: 0.5rem; }
.tagline { font-size: 1.2rem; opacity: 0.9; }
.search-section { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 2rem; }
.section-title { color: #333; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
.info-box { background: #e3f2fd; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #2196f3; }
.search-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
.form-group { display: flex; flex-direction: column; }
.form-control { padding: 0.75rem; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s; }
.form-control:focus { outline: none; border-color: #4361ee; }
.btn { padding: 0.75rem 2rem; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.5rem; }
.btn-primary { background: #4361ee; color: white; }
.btn-primary:hover { background: #3a56d4; transform: translateY(-2px); }
.results-section { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
.results-header { display: flex; justify-content: between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
.results-count { background: #4361ee; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; }
.results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
.job-card { background: #f8f9fa; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #4361ee; transition: transform 0.3s; }
.job-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
.job-url { display: inline-block; margin-top: 1rem; padding: 0.5rem 1rem; background: #4361ee; color: white; text-decoration: none; border-radius: 5px; transition: background 0.3s; }
.job-url:hover { background: #3a56d4; }
footer { text-align: center; color: white; margin-top: 2rem; opacity: 0.8; }
</style>
</head>
<body>
<div class="container">
<header>
<div class="logo"><i class="fas fa-link"></i><h1>Job URL</h1></div>
<p class="tagline">Direct links to company career pages. No sign-up required. Always free.</p>
</header>

<section class="search-section">
<h2 class="section-title"><i class="fas fa-search"></i> Find Your Dream Job</h2>
<div class="info-box">
<p><i class="fas fa-info-circle"></i> Enter any company name and job title to get live job posting URLs.</p>
</div>

<form class="search-form" id="searchForm">
<div class="form-group">
<label for="company">Company Name</label>
<input type="text" id="company" class="form-control" placeholder="e.g. Apple, Google" required>
</div>
<div class="form-group">
<label for="jobTitle">Job Title</label>
<input type="text" id="jobTitle" class="form-control" placeholder="e.g. Data Analyst" required>
</div>
<!-- ADD THIS MISSING LOCATION FIELD -->
<div class="form-group">
<label for="location">Location</label>
<input type="text" id="location" class="form-control" placeholder="e.g. San Francisco, Remote" required>
</div>
<!-- OPTIONAL: Add job type dropdown -->
<div class="form-group">
<label for="jobType">Job Type</label>
<select id="jobType" class="form-control">
<option value="">Any Type</option>
<option value="Full-time">Full-time</option>
<option value="Part-time">Part-time</option>
<option value="Contract">Contract</option>
<option value="Internship">Internship</option>
<option value="Remote">Remote</option>
</select>
</div>
</form>

<div class="actions">
<button class="btn btn-primary" id="searchBtn"><i class="fas fa-search"></i>&nbsp; Search Jobs</button>
</div>
</section>

<section class="results-section">
<div class="results-header">
<h2 class="section-title"><i class="fas fa-briefcase"></i> Results</h2>
<span class="results-count" id="resultsCount">0 jobs found</span>
</div>
<div class="results-grid" id="resultsGrid">
<!-- Job cards will appear here -->
</div>
</section>

<footer>
&copy; 2025 Job URL | Built with ❤️ for job seekers
</footer>
</div>

<script>
  const API_URL = "https://job-url-backend.onrender.com/api/jobs";
  
  const searchBtn = document.getElementById('searchBtn');
  const resultsGrid = document.getElementById('resultsGrid');
  const resultsCount = document.getElementById('resultsCount');

  async function searchJobs() {
    const company = document.getElementById('company').value.trim();
    const jobTitle = document.getElementById('jobTitle').value.trim();
    const location = document.getElementById('location').value.trim();
    const jobType = document.getElementById('jobType').value || "";

    if (!company || !jobTitle || !location) {
      alert("Please fill in company, job title, and location.");
      return;
    }

    resultsGrid.innerHTML = `<div class="searching-message"><i class="fas fa-spinner fa-spin"></i> Searching for jobs...</div>`;
    resultsCount.textContent = "Searching...";

    try {
      const queryParams = new URLSearchParams({
        company: company,
        title: jobTitle,
        location: location,
        type: jobType
      });

      const res = await fetch(`${API_URL}?${queryParams}`);
      const data = await res.json();

      console.log("API Response:", data);

      if (!data.jobs || data.jobs.length === 0) {
        resultsGrid.innerHTML = `<div class="no-results"><i class="fas fa-search"></i> No jobs found. Try different search terms.</div>`;
        resultsCount.textContent = "0 jobs found";
        return;
      }

      resultsCount.textContent = `${data.jobs.length} job${data.jobs.length > 1 ? 's' : ''} found`;
      resultsGrid.innerHTML = "";
      
      data.jobs.forEach(job => {
        const card = document.createElement('div');
        card.classList.add('job-card');
        card.innerHTML = `
          <h3>${job.title}</h3>
          <p><strong>Company:</strong> ${job.company}</p>
          <p><strong>Location:</strong> ${job.location}</p>
          <p><strong>Type:</strong> ${job.type}</p>
          <a href="${job.url}" target="_blank" class="job-url">
            <i class="fas fa-external-link-alt"></i> View Job Posting
          </a>
        `;
        resultsGrid.appendChild(card);
      });

    } catch (err) {
      console.error("Frontend Error:", err);
      resultsGrid.innerHTML = `<div class="error-message"><i class="fas fa-exclamation-triangle"></i> Error fetching jobs. Try again later.</div>`;
      resultsCount.textContent = "Error";
    }
  }

  searchBtn.addEventListener('click', searchJobs);

  // Optional: Allow pressing Enter to search
  document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    searchJobs();
  });
</script>
</body>
</html>